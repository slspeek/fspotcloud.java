description = 'Production GAE war'

apply plugin: 'war'

dependencies {
    compile project(':server-module-j2ee')
}

task unpackJavascript(dependsOn: ':client:javascriptJar') << {
    myTests = file("../client/build/libs/client-${version}-javascript.jar")
    ant.unjar(dest: "$buildDir/javascript/", src: myTests)
}

war {
    from "build/javascript"
    from "src/main/resources"
}

war.dependsOn unpackJavascript