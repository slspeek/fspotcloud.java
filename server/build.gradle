description = 'F-SpotCloud Server Component'


configurations {
    provided
}

sourceSets {
    main { compileClasspath += configurations.provided }
    jukito {}
}

dependencies {
    compile project(':rpc')
    compile project(':model-api')
    compile project(':user-service-api')
    compile project(':peer-rpc')
    compile libs.bot_dispatch_controller
    compile libs.task_dispatch_dispatch_api
    provided libs.servlet_spec
//    compile libs.servlet_spec
    compile libs.guava

    testCompile project(':model-jpa-j2ee')
    testCompile libs.test_ng
    testCompile libs.mockito
    testCompile libs.guava

    jukitoCompile libs.jukito
    jukitoCompile libs.junit
    jukitoCompile sourceSets.main.output
    jukitoCompile configurations.testCompile
    jukitoCompile sourceSets.test.output
    jukitoRuntime configurations.testRuntime

}

checkstyleJukito.ignoreFailures = true

task jukitoTest(type: Test, dependsOn: classes) {
    testClassesDir = sourceSets.jukito.output.classesDir
    classpath = sourceSets.jukito.runtimeClasspath
}

test.dependsOn jukitoTest

test.useTestNG()
